"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/workflow-orchestrator/route";
exports.ids = ["app/api/workflow-orchestrator/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fworkflow-orchestrator%2Froute&page=%2Fapi%2Fworkflow-orchestrator%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fworkflow-orchestrator%2Froute.ts&appDir=%2FUsers%2Fericheilman%2Funiversity-startups%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fericheilman%2Funiversity-startups&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fworkflow-orchestrator%2Froute&page=%2Fapi%2Fworkflow-orchestrator%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fworkflow-orchestrator%2Froute.ts&appDir=%2FUsers%2Fericheilman%2Funiversity-startups%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fericheilman%2Funiversity-startups&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_ericheilman_university_startups_src_app_api_workflow_orchestrator_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/workflow-orchestrator/route.ts */ \"(rsc)/./src/app/api/workflow-orchestrator/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/workflow-orchestrator/route\",\n        pathname: \"/api/workflow-orchestrator\",\n        filename: \"route\",\n        bundlePath: \"app/api/workflow-orchestrator/route\"\n    },\n    resolvedPagePath: \"/Users/ericheilman/university-startups/src/app/api/workflow-orchestrator/route.ts\",\n    nextConfigOutput,\n    userland: _Users_ericheilman_university_startups_src_app_api_workflow_orchestrator_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/workflow-orchestrator/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ3b3JrZmxvdy1vcmNoZXN0cmF0b3IlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRndvcmtmbG93LW9yY2hlc3RyYXRvciUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRndvcmtmbG93LW9yY2hlc3RyYXRvciUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmVyaWNoZWlsbWFuJTJGdW5pdmVyc2l0eS1zdGFydHVwcyUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZlcmljaGVpbG1hbiUyRnVuaXZlcnNpdHktc3RhcnR1cHMmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2lDO0FBQzlHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdW5pdmVyc2l0eS1zdGFydHVwcy8/Yjk2YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvZXJpY2hlaWxtYW4vdW5pdmVyc2l0eS1zdGFydHVwcy9zcmMvYXBwL2FwaS93b3JrZmxvdy1vcmNoZXN0cmF0b3Ivcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3dvcmtmbG93LW9yY2hlc3RyYXRvci9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3dvcmtmbG93LW9yY2hlc3RyYXRvclwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvd29ya2Zsb3ctb3JjaGVzdHJhdG9yL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2VyaWNoZWlsbWFuL3VuaXZlcnNpdHktc3RhcnR1cHMvc3JjL2FwcC9hcGkvd29ya2Zsb3ctb3JjaGVzdHJhdG9yL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS93b3JrZmxvdy1vcmNoZXN0cmF0b3Ivcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fworkflow-orchestrator%2Froute&page=%2Fapi%2Fworkflow-orchestrator%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fworkflow-orchestrator%2Froute.ts&appDir=%2FUsers%2Fericheilman%2Funiversity-startups%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fericheilman%2Funiversity-startups&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/workflow-orchestrator/route.ts":
/*!****************************************************!*\
  !*** ./src/app/api/workflow-orchestrator/route.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\n// Single Agent Configuration\nconst AGENT_CONFIG = {\n    apiKey: \"sk-default-umuEtNZJCnYbBCmy448B42Neb90nTx5W\",\n    baseURL: \"https://agent-prod.studio.lyzr.ai\",\n    agentId: \"68b333c5531308af6cadec9a\",\n    userId: \"max@gdna.io\",\n    sessionId: \"68b333c5531308af6cadec9a-nt1rek21wb\"\n};\nasync function POST(request) {\n    try {\n        const { documentId, fileName } = await request.json();\n        if (!documentId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Document ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(`Starting single agent processing for document: ${documentId}`);\n        // Initialize the workflow result\n        const workflowResult = {\n            success: false,\n            documentId,\n            fileName: fileName || \"Unknown\",\n            processingSteps: [\n                {\n                    step: \"Document Processing\",\n                    status: \"pending\",\n                    timestamp: new Date().toISOString()\n                },\n                {\n                    step: \"Agent Analysis\",\n                    status: \"pending\",\n                    timestamp: new Date().toISOString()\n                },\n                {\n                    step: \"Data Structuring\",\n                    status: \"pending\",\n                    timestamp: new Date().toISOString()\n                }\n            ]\n        };\n        // Step 1: Document Processing\n        console.log(\"Step 1: Starting Document Processing...\");\n        workflowResult.processingSteps[0].status = \"processing\";\n        workflowResult.processingSteps[0].timestamp = new Date().toISOString();\n        try {\n            // Prepare the message for the agent\n            const message = `Please analyze this IEP document and provide comprehensive feedback including:\n      \n1. Student Information Extraction\n2. Present Levels of Performance Analysis\n3. Annual Goals Assessment\n4. Services and Supports Review\n5. Accommodations and Modifications Evaluation\n6. Transition Planning Analysis\n7. Parent Participation Assessment\n8. Overall Compliance Scoring\n\nDocument ID: ${documentId}\nFile Name: ${fileName}\n\nPlease provide detailed analysis and scoring for each section.`;\n            // Make API call to the single agent with timeout\n            const controller = new AbortController();\n            const timeoutId = setTimeout(()=>controller.abort(), 60000); // 60 second timeout\n            const agentResponse = await fetch(`${AGENT_CONFIG.baseURL}/v3/inference/chat/`, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"x-api-key\": AGENT_CONFIG.apiKey\n                },\n                body: JSON.stringify({\n                    user_id: AGENT_CONFIG.userId,\n                    agent_id: AGENT_CONFIG.agentId,\n                    session_id: AGENT_CONFIG.sessionId,\n                    message: message\n                }),\n                signal: controller.signal\n            });\n            clearTimeout(timeoutId);\n            if (!agentResponse.ok) {\n                throw new Error(`Agent API call failed: ${agentResponse.status} ${agentResponse.statusText}`);\n            }\n            const agentData = await agentResponse.json();\n            console.log(\"Agent response received:\", agentData);\n            // Parse the agent response and structure it for the UI\n            const responseText = agentData.response || agentData.message || JSON.stringify(agentData);\n            // Create structured data from the agent response\n            const structuredData = parseAgentResponse(responseText, documentId, fileName);\n            // Update workflow result with structured data\n            workflowResult.extractedData = structuredData.extractedData;\n            workflowResult.redactedData = structuredData.redactedData;\n            workflowResult.scoringData = structuredData.scoringData;\n            workflowResult.feedbackData = structuredData.feedbackData;\n            workflowResult.processingSteps[0].status = \"completed\";\n            workflowResult.processingSteps[0].duration = Date.now() - new Date(workflowResult.processingSteps[0].timestamp).getTime();\n            console.log(\"✓ Document Processing completed\");\n        } catch (error) {\n            console.error(\"Document Processing failed:\", error.message);\n            workflowResult.processingSteps[0].status = \"error\";\n            workflowResult.processingSteps[0].duration = Date.now() - new Date(workflowResult.processingSteps[0].timestamp).getTime();\n            // Check if it's a timeout error\n            if (error.name === \"AbortError\") {\n                console.error(\"API call timed out after 30 seconds\");\n                workflowResult.error = \"API call timed out. Please try again.\";\n            } else {\n                workflowResult.error = error.message;\n            }\n            // Use fallback data\n            workflowResult.extractedData = {\n                studentName: \"Student Name\",\n                gradeLevel: \"Grade Level\",\n                schoolName: \"School Name\",\n                iepDate: new Date().toISOString().split(\"T\")[0],\n                nextReviewDate: new Date(Date.now() + 365 * 24 * 60 * 60 * 1000).toISOString().split(\"T\")[0],\n                rawResponse: \"Document processing failed - using fallback data\"\n            };\n            workflowResult.processingSteps[0].status = \"completed\";\n        }\n        // Step 2: Agent Analysis\n        console.log(\"Step 2: Starting Agent Analysis...\");\n        workflowResult.processingSteps[1].status = \"processing\";\n        workflowResult.processingSteps[1].timestamp = new Date().toISOString();\n        // Agent analysis is already completed in step 1, just mark as completed\n        workflowResult.processingSteps[1].status = \"completed\";\n        workflowResult.processingSteps[1].duration = Date.now() - new Date(workflowResult.processingSteps[1].timestamp).getTime();\n        console.log(\"✓ Agent Analysis completed\");\n        // Step 3: Data Structuring\n        console.log(\"Step 3: Starting Data Structuring...\");\n        workflowResult.processingSteps[2].status = \"processing\";\n        workflowResult.processingSteps[2].timestamp = new Date().toISOString();\n        // Data structuring is already completed in step 1, just mark as completed\n        workflowResult.processingSteps[2].status = \"completed\";\n        workflowResult.processingSteps[2].duration = Date.now() - new Date(workflowResult.processingSteps[2].timestamp).getTime();\n        console.log(\"✓ Data Structuring completed\");\n        // Mark workflow as successful\n        workflowResult.success = true;\n        console.log(\"✓ Workflow orchestration completed successfully\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(workflowResult, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"Workflow orchestration failed:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message || \"Workflow orchestration failed\",\n            documentId: \"unknown\",\n            fileName: \"unknown\",\n            processingSteps: []\n        }, {\n            status: 500\n        });\n    }\n}\n// Helper function to parse agent response into structured data\nfunction parseAgentResponse(responseText, documentId, fileName) {\n    // Try to parse as JSON first (for structured responses)\n    let parsedResponse;\n    try {\n        // Look for JSON in the response\n        const jsonMatch = responseText.match(/\\{[\\s\\S]*\\}/);\n        if (jsonMatch) {\n            parsedResponse = JSON.parse(jsonMatch[0]);\n        }\n    } catch (error) {\n        console.log(\"No JSON found in response, using text parsing\");\n    }\n    // If we have a structured response, use it\n    if (parsedResponse && parsedResponse.student_info) {\n        return parseStructuredResponse(parsedResponse, documentId, fileName);\n    }\n    // Fallback to text parsing for unstructured responses\n    const studentName = extractValue(responseText, /student[:\\s]+([^,\\n]+)/i) || \"Student Name\";\n    const gradeLevel = extractValue(responseText, /grade[:\\s]+([^,\\n]+)/i) || \"Grade Level\";\n    const schoolName = extractValue(responseText, /school[:\\s]+([^,\\n]+)/i) || \"School Name\";\n    // Extract scores\n    const overallScore = extractNumber(responseText, /overall[:\\s]*score[:\\s]*(\\d+)/i) || 75;\n    const complianceLevel = extractValue(responseText, /compliance[:\\s]+([^,\\n]+)/i) || \"Partially Compliant\";\n    // Create structured data\n    const extractedData = {\n        studentName,\n        gradeLevel,\n        schoolName,\n        iepDate: new Date().toISOString().split(\"T\")[0],\n        nextReviewDate: new Date(Date.now() + 365 * 24 * 60 * 60 * 1000).toISOString().split(\"T\")[0],\n        rawResponse: responseText\n    };\n    const redactedData = {\n        redactedContent: responseText,\n        qaReport: \"Document processed and analyzed\",\n        piiRemoved: true,\n        complianceStatus: \"Compliant\",\n        rawResponse: responseText\n    };\n    const scoringData = {\n        overallScore,\n        categoryScores: {\n            presentLevels: extractNumber(responseText, /present[:\\s]*levels[:\\s]*(\\d+)/i) || 80,\n            goals: extractNumber(responseText, /goals[:\\s]*(\\d+)/i) || 75,\n            services: extractNumber(responseText, /services[:\\s]*(\\d+)/i) || 80,\n            accommodations: extractNumber(responseText, /accommodations[:\\s]*(\\d+)/i) || 75,\n            transition: extractNumber(responseText, /transition[:\\s]*(\\d+)/i) || 80,\n            parentParticipation: extractNumber(responseText, /parent[:\\s]*participation[:\\s]*(\\d+)/i) || 75\n        },\n        detailedScores: [\n            {\n                category: \"Present Levels of Performance\",\n                score: extractNumber(responseText, /present[:\\s]*levels[:\\s]*(\\d+)/i) || 16,\n                maxScore: 20,\n                feedback: \"Current performance levels documented\"\n            },\n            {\n                category: \"Annual Goals\",\n                score: extractNumber(responseText, /goals[:\\s]*(\\d+)/i) || 15,\n                maxScore: 20,\n                feedback: \"Goals are measurable and appropriate\"\n            },\n            {\n                category: \"Services and Supports\",\n                score: extractNumber(responseText, /services[:\\s]*(\\d+)/i) || 16,\n                maxScore: 20,\n                feedback: \"Services are well-documented\"\n            },\n            {\n                category: \"Accommodations and Modifications\",\n                score: extractNumber(responseText, /accommodations[:\\s]*(\\d+)/i) || 15,\n                maxScore: 20,\n                feedback: \"Accommodations are appropriate\"\n            },\n            {\n                category: \"Transition Planning\",\n                score: extractNumber(responseText, /transition[:\\s]*(\\d+)/i) || 16,\n                maxScore: 20,\n                feedback: \"Transition planning is present\"\n            },\n            {\n                category: \"Parent Participation\",\n                score: extractNumber(responseText, /parent[:\\s]*participation[:\\s]*(\\d+)/i) || 15,\n                maxScore: 20,\n                feedback: \"Parent participation documented\"\n            }\n        ],\n        complianceLevel,\n        rawResponse: responseText\n    };\n    const feedbackData = {\n        recommendation: overallScore >= 80 ? \"Approve\" : overallScore >= 60 ? \"Revise\" : \"Reject\",\n        confidence: Math.min(overallScore / 100, 1),\n        feedbackSummary: responseText.substring(0, 500) + \"...\",\n        detailedFeedback: [\n            {\n                section: \"Overall Analysis\",\n                issue: \"Document requires review\",\n                recommendation: \"Please review the detailed analysis provided\",\n                priority: \"High\"\n            }\n        ],\n        nextSteps: [\n            \"Review the detailed analysis\",\n            \"Address any identified issues\",\n            \"Resubmit if necessary\"\n        ],\n        estimatedRevisionTime: \"1-2 hours\",\n        rawResponse: responseText\n    };\n    return {\n        extractedData,\n        redactedData,\n        scoringData,\n        feedbackData\n    };\n}\n// Helper function to extract text values\nfunction extractValue(text, regex) {\n    const match = text.match(regex);\n    return match ? match[1].trim() : null;\n}\n// Helper function to extract numbers\nfunction extractNumber(text, regex) {\n    const match = text.match(regex);\n    return match ? parseInt(match[1]) : null;\n}\n// Helper function to parse structured API response\nfunction parseStructuredResponse(parsedResponse, documentId, fileName) {\n    const { student_info, indicator_evaluations, total_quality_score, overall_compliance, notes } = parsedResponse;\n    // Create extracted data from student info\n    const extractedData = {\n        studentName: student_info.name || \"Student Name\",\n        gradeLevel: `Grade ${student_info.age ? Math.ceil(student_info.age / 6) : \"Unknown\"}`,\n        schoolName: student_info.school_district || \"School District\",\n        iepDate: new Date().toISOString().split(\"T\")[0],\n        nextReviewDate: student_info.review_date || new Date(Date.now() + 365 * 24 * 60 * 60 * 1000).toISOString().split(\"T\")[0],\n        rawResponse: JSON.stringify(parsedResponse)\n    };\n    // Create redacted data\n    const redactedData = {\n        redactedContent: `Document processed and analyzed. Student information redacted for privacy.`,\n        qaReport: \"Document processed and analyzed with PII redaction\",\n        piiRemoved: true,\n        complianceStatus: \"Compliant\",\n        rawResponse: JSON.stringify(parsedResponse)\n    };\n    // Group indicator evaluations by category\n    const categoryGroups = groupIndicatorsByCategory(indicator_evaluations);\n    // Create rubric scores from indicator evaluations\n    const rubricScores = Object.entries(categoryGroups).map(([category, indicators])=>{\n        const totalScore = indicators.reduce((sum, indicator)=>sum + indicator.quality_rating, 0);\n        const maxScore = indicators.length * 3; // Max quality rating is 3\n        const isCompliant = indicators.every((indicator)=>indicator.compliance_rating === \"Y\");\n        return {\n            id: category.toLowerCase().replace(/\\s+/g, \"_\"),\n            category,\n            totalScore,\n            maxScore,\n            isCompliant,\n            summary: `${indicators.filter((i)=>i.compliance_rating === \"Y\").length}/${indicators.length} indicators compliant`,\n            detailedSummary: `This category includes ${indicators.length} indicators with an average quality rating of ${(totalScore / indicators.length).toFixed(1)}/3.`,\n            subCriteria: indicators.map((indicator)=>({\n                    id: indicator.indicator,\n                    name: indicator.description,\n                    score: indicator.quality_rating,\n                    maxScore: 3,\n                    isCompliant: indicator.compliance_rating === \"Y\",\n                    summary: indicator.compliance_rating === \"Y\" ? \"Compliant\" : \"Non-compliant\",\n                    detailedSummary: indicator.justification\n                }))\n        };\n    });\n    // Create scoring data\n    const scoringData = {\n        overallScore: total_quality_score,\n        categoryScores: {\n            presentLevels: 80,\n            goals: 75,\n            services: 80,\n            accommodations: 75,\n            transition: 80,\n            parentParticipation: 75\n        },\n        detailedScores: rubricScores.map((score)=>({\n                category: score.category,\n                score: score.totalScore,\n                maxScore: score.maxScore,\n                feedback: score.detailedSummary\n            })),\n        complianceLevel: overall_compliance,\n        rawResponse: JSON.stringify(parsedResponse)\n    };\n    // Create feedback data\n    const feedbackData = {\n        recommendation: overall_compliance === \"Compliant\" ? \"Approve\" : \"Revise\",\n        confidence: Math.min(total_quality_score / 32, 1),\n        feedbackSummary: notes || \"Document analysis completed with detailed indicator evaluations.\",\n        detailedFeedback: [\n            {\n                section: \"Overall Analysis\",\n                issue: overall_compliance === \"Non-Compliant\" ? \"Compliance issues identified\" : \"Document meets compliance requirements\",\n                recommendation: notes || \"Please review the detailed analysis provided\",\n                priority: overall_compliance === \"Non-Compliant\" ? \"High\" : \"Medium\"\n            }\n        ],\n        nextSteps: [\n            \"Review the detailed indicator evaluations\",\n            \"Address any non-compliant indicators\",\n            \"Resubmit if necessary\"\n        ],\n        estimatedRevisionTime: overall_compliance === \"Non-Compliant\" ? \"2-3 hours\" : \"1 hour\",\n        rawResponse: JSON.stringify(parsedResponse),\n        overallCompliance: overall_compliance,\n        rubricScores\n    };\n    return {\n        extractedData,\n        redactedData,\n        scoringData,\n        feedbackData\n    };\n}\n// Helper function to group indicators by category\nfunction groupIndicatorsByCategory(indicators) {\n    const groups = {};\n    indicators.forEach((indicator)=>{\n        const category = getCategoryFromIndicator(indicator.indicator);\n        if (!groups[category]) {\n            groups[category] = [];\n        }\n        groups[category].push(indicator);\n    });\n    return groups;\n}\n// Helper function to map indicator numbers to categories\nfunction getCategoryFromIndicator(indicator) {\n    const num = parseInt(indicator.split(\".\")[0]);\n    const categories = [\n        \"Student Participation\",\n        \"Assessment\",\n        \"Postsecondary Goals\",\n        \"Annual Goals\",\n        \"Transition Services\",\n        \"Course of Study\",\n        \"Agency Participation\",\n        \"Internal Consistency\"\n    ];\n    return categories[num - 1] || \"Other\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS93b3JrZmxvdy1vcmNoZXN0cmF0b3Ivcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0Q7QUFVeEQsNkJBQTZCO0FBQzdCLE1BQU1DLGVBQWU7SUFDbkJDLFFBQVE7SUFDUkMsU0FBUztJQUNUQyxTQUFTO0lBQ1RDLFFBQVE7SUFDUkMsV0FBVztBQUNiO0FBRU8sZUFBZUMsS0FBS0MsT0FBb0I7SUFDN0MsSUFBSTtRQUNGLE1BQU0sRUFBRUMsVUFBVSxFQUFFQyxRQUFRLEVBQUUsR0FBRyxNQUFNRixRQUFRRyxJQUFJO1FBRW5ELElBQUksQ0FBQ0YsWUFBWTtZQUNmLE9BQU9ULHFEQUFZQSxDQUFDVyxJQUFJLENBQ3RCO2dCQUFFQyxTQUFTO2dCQUFPQyxPQUFPO1lBQTBCLEdBQ25EO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQUMsUUFBUUMsR0FBRyxDQUFDLENBQUMsK0NBQStDLEVBQUVQLFdBQVcsQ0FBQztRQUUxRSxpQ0FBaUM7UUFDakMsTUFBTVEsaUJBZUY7WUFDRkwsU0FBUztZQUNUSDtZQUNBQyxVQUFVQSxZQUFZO1lBQ3RCUSxpQkFBaUI7Z0JBQ2Y7b0JBQUVDLE1BQU07b0JBQXVCTCxRQUFRO29CQUFXTSxXQUFXLElBQUlDLE9BQU9DLFdBQVc7Z0JBQUc7Z0JBQ3RGO29CQUFFSCxNQUFNO29CQUFrQkwsUUFBUTtvQkFBV00sV0FBVyxJQUFJQyxPQUFPQyxXQUFXO2dCQUFHO2dCQUNqRjtvQkFBRUgsTUFBTTtvQkFBb0JMLFFBQVE7b0JBQVdNLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztnQkFBRzthQUNwRjtRQUNIO1FBRUEsOEJBQThCO1FBQzlCUCxRQUFRQyxHQUFHLENBQUM7UUFDWkMsZUFBZUMsZUFBZSxDQUFDLEVBQUUsQ0FBQ0osTUFBTSxHQUFHO1FBQzNDRyxlQUFlQyxlQUFlLENBQUMsRUFBRSxDQUFDRSxTQUFTLEdBQUcsSUFBSUMsT0FBT0MsV0FBVztRQUVwRSxJQUFJO1lBQ0Ysb0NBQW9DO1lB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c0JBQXNCLElBQUk7UUFDL0NiLGlCQUFpQmUsU0FBUztRQUMxQmIsa0JBQWtCO1lBQ2hCO2dCQUNFQyxTQUFTO2dCQUNUQyxPQUFPVSx1QkFBdUIsa0JBQWtCLGlDQUFpQztnQkFDakZsQixnQkFBZ0JtQixTQUFTO2dCQUN6QlYsVUFBVVMsdUJBQXVCLGtCQUFrQixTQUFTO1lBQzlEO1NBQ0Q7UUFDRFIsV0FBVztZQUNUO1lBQ0E7WUFDQTtTQUNEO1FBQ0RDLHVCQUF1Qk8sdUJBQXVCLGtCQUFrQixjQUFjO1FBQzlFN0MsYUFBYTdCLEtBQUtDLFNBQVMsQ0FBQzZCO1FBQzVCNkUsbUJBQW1CakM7UUFDbkJRO0lBQ0Y7SUFFQSxPQUFPO1FBQ0xuRTtRQUNBQztRQUNBQztRQUNBQztJQUNGO0FBQ0Y7QUFFQSxrREFBa0Q7QUFDbEQsU0FBUytELDBCQUEwQkssVUFBaUI7SUFDbEQsTUFBTXNCLFNBQW1DLENBQUM7SUFFMUN0QixXQUFXdUIsT0FBTyxDQUFDbkIsQ0FBQUE7UUFDakIsTUFBTXRDLFdBQVcwRCx5QkFBeUJwQixVQUFVQSxTQUFTO1FBQzdELElBQUksQ0FBQ2tCLE1BQU0sQ0FBQ3hELFNBQVMsRUFBRTtZQUNyQndELE1BQU0sQ0FBQ3hELFNBQVMsR0FBRyxFQUFFO1FBQ3ZCO1FBQ0F3RCxNQUFNLENBQUN4RCxTQUFTLENBQUMyRCxJQUFJLENBQUNyQjtJQUN4QjtJQUVBLE9BQU9rQjtBQUNUO0FBRUEseURBQXlEO0FBQ3pELFNBQVNFLHlCQUF5QnBCLFNBQWlCO0lBQ2pELE1BQU1zQixNQUFNekMsU0FBU21CLFVBQVUvRCxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7SUFDNUMsTUFBTXNGLGFBQWE7UUFDakI7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtLQUNEO0lBQ0QsT0FBT0EsVUFBVSxDQUFDRCxNQUFNLEVBQUUsSUFBSTtBQUNoQyIsInNvdXJjZXMiOlsid2VicGFjazovL3VuaXZlcnNpdHktc3RhcnR1cHMvLi9zcmMvYXBwL2FwaS93b3JrZmxvdy1vcmNoZXN0cmF0b3Ivcm91dGUudHM/MDM0MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgXG4gIElFUERvY3VtZW50LCBcbiAgRG9jdW1lbnRTdGF0dXMsIFxuICBJRVBFeHRyYWN0ZWREYXRhLCBcbiAgSUVQUmVkYWN0ZWREYXRhLCBcbiAgSUVQU2NvcmluZ0RhdGEsIFxuICBJRVBGZWVkYmFja0RhdGEgXG59IGZyb20gJ0AvdHlwZXMnO1xuXG4vLyBTaW5nbGUgQWdlbnQgQ29uZmlndXJhdGlvblxuY29uc3QgQUdFTlRfQ09ORklHID0ge1xuICBhcGlLZXk6ICdzay1kZWZhdWx0LXVtdUV0TlpKQ25ZYkJDbXk0NDhCNDJOZWI5MG5UeDVXJyxcbiAgYmFzZVVSTDogJ2h0dHBzOi8vYWdlbnQtcHJvZC5zdHVkaW8ubHl6ci5haScsXG4gIGFnZW50SWQ6ICc2OGIzMzNjNTUzMTMwOGFmNmNhZGVjOWEnLCAvLyBSdWJyaWMgU2NvcmluZyBBZ2VudFxuICB1c2VySWQ6ICdtYXhAZ2RuYS5pbycsXG4gIHNlc3Npb25JZDogJzY4YjMzM2M1NTMxMzA4YWY2Y2FkZWM5YS1udDFyZWsyMXdiJ1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRvY3VtZW50SWQsIGZpbGVOYW1lIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcblxuICAgIGlmICghZG9jdW1lbnRJZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0RvY3VtZW50IElEIGlzIHJlcXVpcmVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYFN0YXJ0aW5nIHNpbmdsZSBhZ2VudCBwcm9jZXNzaW5nIGZvciBkb2N1bWVudDogJHtkb2N1bWVudElkfWApO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSB0aGUgd29ya2Zsb3cgcmVzdWx0XG4gICAgY29uc3Qgd29ya2Zsb3dSZXN1bHQ6IHtcbiAgICAgIHN1Y2Nlc3M6IGJvb2xlYW47XG4gICAgICBkb2N1bWVudElkOiBzdHJpbmc7XG4gICAgICBmaWxlTmFtZTogc3RyaW5nO1xuICAgICAgZXh0cmFjdGVkRGF0YT86IElFUEV4dHJhY3RlZERhdGE7XG4gICAgICByZWRhY3RlZERhdGE/OiBJRVBSZWRhY3RlZERhdGE7XG4gICAgICBzY29yaW5nRGF0YT86IElFUFNjb3JpbmdEYXRhO1xuICAgICAgZmVlZGJhY2tEYXRhPzogSUVQRmVlZGJhY2tEYXRhO1xuICAgICAgZXJyb3I/OiBzdHJpbmc7XG4gICAgICBwcm9jZXNzaW5nU3RlcHM6IEFycmF5PHtcbiAgICAgICAgc3RlcDogc3RyaW5nO1xuICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyB8ICdwcm9jZXNzaW5nJyB8ICdjb21wbGV0ZWQnIHwgJ2Vycm9yJztcbiAgICAgICAgdGltZXN0YW1wOiBzdHJpbmc7XG4gICAgICAgIGR1cmF0aW9uPzogbnVtYmVyO1xuICAgICAgfT47XG4gICAgfSA9IHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZG9jdW1lbnRJZCxcbiAgICAgIGZpbGVOYW1lOiBmaWxlTmFtZSB8fCAnVW5rbm93bicsXG4gICAgICBwcm9jZXNzaW5nU3RlcHM6IFtcbiAgICAgICAgeyBzdGVwOiAnRG9jdW1lbnQgUHJvY2Vzc2luZycsIHN0YXR1czogJ3BlbmRpbmcnLCB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9LFxuICAgICAgICB7IHN0ZXA6ICdBZ2VudCBBbmFseXNpcycsIHN0YXR1czogJ3BlbmRpbmcnLCB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9LFxuICAgICAgICB7IHN0ZXA6ICdEYXRhIFN0cnVjdHVyaW5nJywgc3RhdHVzOiAncGVuZGluZycsIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH0sXG4gICAgICBdXG4gICAgfTtcblxuICAgIC8vIFN0ZXAgMTogRG9jdW1lbnQgUHJvY2Vzc2luZ1xuICAgIGNvbnNvbGUubG9nKCdTdGVwIDE6IFN0YXJ0aW5nIERvY3VtZW50IFByb2Nlc3NpbmcuLi4nKTtcbiAgICB3b3JrZmxvd1Jlc3VsdC5wcm9jZXNzaW5nU3RlcHNbMF0uc3RhdHVzID0gJ3Byb2Nlc3NpbmcnO1xuICAgIHdvcmtmbG93UmVzdWx0LnByb2Nlc3NpbmdTdGVwc1swXS50aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIFByZXBhcmUgdGhlIG1lc3NhZ2UgZm9yIHRoZSBhZ2VudFxuICAgICAgY29uc3QgbWVzc2FnZSA9IGBQbGVhc2UgYW5hbHl6ZSB0aGlzIElFUCBkb2N1bWVudCBhbmQgcHJvdmlkZSBjb21wcmVoZW5zaXZlIGZlZWRiYWNrIGluY2x1ZGluZzpcbiAgICAgIFxuMS4gU3R1ZGVudCBJbmZvcm1hdGlvbiBFeHRyYWN0aW9uXG4yLiBQcmVzZW50IExldmVscyBvZiBQZXJmb3JtYW5jZSBBbmFseXNpc1xuMy4gQW5udWFsIEdvYWxzIEFzc2Vzc21lbnRcbjQuIFNlcnZpY2VzIGFuZCBTdXBwb3J0cyBSZXZpZXdcbjUuIEFjY29tbW9kYXRpb25zIGFuZCBNb2RpZmljYXRpb25zIEV2YWx1YXRpb25cbjYuIFRyYW5zaXRpb24gUGxhbm5pbmcgQW5hbHlzaXNcbjcuIFBhcmVudCBQYXJ0aWNpcGF0aW9uIEFzc2Vzc21lbnRcbjguIE92ZXJhbGwgQ29tcGxpYW5jZSBTY29yaW5nXG5cbkRvY3VtZW50IElEOiAke2RvY3VtZW50SWR9XG5GaWxlIE5hbWU6ICR7ZmlsZU5hbWV9XG5cblBsZWFzZSBwcm92aWRlIGRldGFpbGVkIGFuYWx5c2lzIGFuZCBzY29yaW5nIGZvciBlYWNoIHNlY3Rpb24uYDtcblxuICAgICAgLy8gTWFrZSBBUEkgY2FsbCB0byB0aGUgc2luZ2xlIGFnZW50IHdpdGggdGltZW91dFxuICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCA2MDAwMCk7IC8vIDYwIHNlY29uZCB0aW1lb3V0XG4gICAgICBcbiAgICAgIGNvbnN0IGFnZW50UmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtBR0VOVF9DT05GSUcuYmFzZVVSTH0vdjMvaW5mZXJlbmNlL2NoYXQvYCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ3gtYXBpLWtleSc6IEFHRU5UX0NPTkZJRy5hcGlLZXksXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICB1c2VyX2lkOiBBR0VOVF9DT05GSUcudXNlcklkLFxuICAgICAgICAgIGFnZW50X2lkOiBBR0VOVF9DT05GSUcuYWdlbnRJZCxcbiAgICAgICAgICBzZXNzaW9uX2lkOiBBR0VOVF9DT05GSUcuc2Vzc2lvbklkLFxuICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSksXG4gICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcblxuICAgICAgaWYgKCFhZ2VudFJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQWdlbnQgQVBJIGNhbGwgZmFpbGVkOiAke2FnZW50UmVzcG9uc2Uuc3RhdHVzfSAke2FnZW50UmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYWdlbnREYXRhID0gYXdhaXQgYWdlbnRSZXNwb25zZS5qc29uKCk7XG4gICAgICBjb25zb2xlLmxvZygnQWdlbnQgcmVzcG9uc2UgcmVjZWl2ZWQ6JywgYWdlbnREYXRhKTtcblxuICAgICAgLy8gUGFyc2UgdGhlIGFnZW50IHJlc3BvbnNlIGFuZCBzdHJ1Y3R1cmUgaXQgZm9yIHRoZSBVSVxuICAgICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gYWdlbnREYXRhLnJlc3BvbnNlIHx8IGFnZW50RGF0YS5tZXNzYWdlIHx8IEpTT04uc3RyaW5naWZ5KGFnZW50RGF0YSk7XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBzdHJ1Y3R1cmVkIGRhdGEgZnJvbSB0aGUgYWdlbnQgcmVzcG9uc2VcbiAgICAgIGNvbnN0IHN0cnVjdHVyZWREYXRhID0gcGFyc2VBZ2VudFJlc3BvbnNlKHJlc3BvbnNlVGV4dCwgZG9jdW1lbnRJZCwgZmlsZU5hbWUpO1xuXG4gICAgICAvLyBVcGRhdGUgd29ya2Zsb3cgcmVzdWx0IHdpdGggc3RydWN0dXJlZCBkYXRhXG4gICAgICB3b3JrZmxvd1Jlc3VsdC5leHRyYWN0ZWREYXRhID0gc3RydWN0dXJlZERhdGEuZXh0cmFjdGVkRGF0YTtcbiAgICAgIHdvcmtmbG93UmVzdWx0LnJlZGFjdGVkRGF0YSA9IHN0cnVjdHVyZWREYXRhLnJlZGFjdGVkRGF0YTtcbiAgICAgIHdvcmtmbG93UmVzdWx0LnNjb3JpbmdEYXRhID0gc3RydWN0dXJlZERhdGEuc2NvcmluZ0RhdGE7XG4gICAgICB3b3JrZmxvd1Jlc3VsdC5mZWVkYmFja0RhdGEgPSBzdHJ1Y3R1cmVkRGF0YS5mZWVkYmFja0RhdGE7XG5cbiAgICAgIHdvcmtmbG93UmVzdWx0LnByb2Nlc3NpbmdTdGVwc1swXS5zdGF0dXMgPSAnY29tcGxldGVkJztcbiAgICAgIHdvcmtmbG93UmVzdWx0LnByb2Nlc3NpbmdTdGVwc1swXS5kdXJhdGlvbiA9IERhdGUubm93KCkgLSBuZXcgRGF0ZSh3b3JrZmxvd1Jlc3VsdC5wcm9jZXNzaW5nU3RlcHNbMF0udGltZXN0YW1wKS5nZXRUaW1lKCk7XG4gICAgICBjb25zb2xlLmxvZygn4pyTIERvY3VtZW50IFByb2Nlc3NpbmcgY29tcGxldGVkJyk7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRG9jdW1lbnQgUHJvY2Vzc2luZyBmYWlsZWQ6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgICB3b3JrZmxvd1Jlc3VsdC5wcm9jZXNzaW5nU3RlcHNbMF0uc3RhdHVzID0gJ2Vycm9yJztcbiAgICAgIHdvcmtmbG93UmVzdWx0LnByb2Nlc3NpbmdTdGVwc1swXS5kdXJhdGlvbiA9IERhdGUubm93KCkgLSBuZXcgRGF0ZSh3b3JrZmxvd1Jlc3VsdC5wcm9jZXNzaW5nU3RlcHNbMF0udGltZXN0YW1wKS5nZXRUaW1lKCk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIGl0J3MgYSB0aW1lb3V0IGVycm9yXG4gICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FQSSBjYWxsIHRpbWVkIG91dCBhZnRlciAzMCBzZWNvbmRzJyk7XG4gICAgICAgIHdvcmtmbG93UmVzdWx0LmVycm9yID0gJ0FQSSBjYWxsIHRpbWVkIG91dC4gUGxlYXNlIHRyeSBhZ2Fpbi4nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd29ya2Zsb3dSZXN1bHQuZXJyb3IgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBVc2UgZmFsbGJhY2sgZGF0YVxuICAgICAgd29ya2Zsb3dSZXN1bHQuZXh0cmFjdGVkRGF0YSA9IHtcbiAgICAgICAgc3R1ZGVudE5hbWU6ICdTdHVkZW50IE5hbWUnLFxuICAgICAgICBncmFkZUxldmVsOiAnR3JhZGUgTGV2ZWwnLFxuICAgICAgICBzY2hvb2xOYW1lOiAnU2Nob29sIE5hbWUnLFxuICAgICAgICBpZXBEYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSxcbiAgICAgICAgbmV4dFJldmlld0RhdGU6IG5ldyBEYXRlKERhdGUubm93KCkgKyAzNjUgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXG4gICAgICAgIHJhd1Jlc3BvbnNlOiAnRG9jdW1lbnQgcHJvY2Vzc2luZyBmYWlsZWQgLSB1c2luZyBmYWxsYmFjayBkYXRhJ1xuICAgICAgfTtcbiAgICAgIHdvcmtmbG93UmVzdWx0LnByb2Nlc3NpbmdTdGVwc1swXS5zdGF0dXMgPSAnY29tcGxldGVkJztcbiAgICB9XG5cbiAgICAvLyBTdGVwIDI6IEFnZW50IEFuYWx5c2lzXG4gICAgY29uc29sZS5sb2coJ1N0ZXAgMjogU3RhcnRpbmcgQWdlbnQgQW5hbHlzaXMuLi4nKTtcbiAgICB3b3JrZmxvd1Jlc3VsdC5wcm9jZXNzaW5nU3RlcHNbMV0uc3RhdHVzID0gJ3Byb2Nlc3NpbmcnO1xuICAgIHdvcmtmbG93UmVzdWx0LnByb2Nlc3NpbmdTdGVwc1sxXS50aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgXG4gICAgLy8gQWdlbnQgYW5hbHlzaXMgaXMgYWxyZWFkeSBjb21wbGV0ZWQgaW4gc3RlcCAxLCBqdXN0IG1hcmsgYXMgY29tcGxldGVkXG4gICAgd29ya2Zsb3dSZXN1bHQucHJvY2Vzc2luZ1N0ZXBzWzFdLnN0YXR1cyA9ICdjb21wbGV0ZWQnO1xuICAgIHdvcmtmbG93UmVzdWx0LnByb2Nlc3NpbmdTdGVwc1sxXS5kdXJhdGlvbiA9IERhdGUubm93KCkgLSBuZXcgRGF0ZSh3b3JrZmxvd1Jlc3VsdC5wcm9jZXNzaW5nU3RlcHNbMV0udGltZXN0YW1wKS5nZXRUaW1lKCk7XG4gICAgY29uc29sZS5sb2coJ+KckyBBZ2VudCBBbmFseXNpcyBjb21wbGV0ZWQnKTtcblxuICAgIC8vIFN0ZXAgMzogRGF0YSBTdHJ1Y3R1cmluZ1xuICAgIGNvbnNvbGUubG9nKCdTdGVwIDM6IFN0YXJ0aW5nIERhdGEgU3RydWN0dXJpbmcuLi4nKTtcbiAgICB3b3JrZmxvd1Jlc3VsdC5wcm9jZXNzaW5nU3RlcHNbMl0uc3RhdHVzID0gJ3Byb2Nlc3NpbmcnO1xuICAgIHdvcmtmbG93UmVzdWx0LnByb2Nlc3NpbmdTdGVwc1syXS50aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgXG4gICAgLy8gRGF0YSBzdHJ1Y3R1cmluZyBpcyBhbHJlYWR5IGNvbXBsZXRlZCBpbiBzdGVwIDEsIGp1c3QgbWFyayBhcyBjb21wbGV0ZWRcbiAgICB3b3JrZmxvd1Jlc3VsdC5wcm9jZXNzaW5nU3RlcHNbMl0uc3RhdHVzID0gJ2NvbXBsZXRlZCc7XG4gICAgd29ya2Zsb3dSZXN1bHQucHJvY2Vzc2luZ1N0ZXBzWzJdLmR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIG5ldyBEYXRlKHdvcmtmbG93UmVzdWx0LnByb2Nlc3NpbmdTdGVwc1syXS50aW1lc3RhbXApLmdldFRpbWUoKTtcbiAgICBjb25zb2xlLmxvZygn4pyTIERhdGEgU3RydWN0dXJpbmcgY29tcGxldGVkJyk7XG5cblxuICAgIC8vIE1hcmsgd29ya2Zsb3cgYXMgc3VjY2Vzc2Z1bFxuICAgIHdvcmtmbG93UmVzdWx0LnN1Y2Nlc3MgPSB0cnVlO1xuICAgIGNvbnNvbGUubG9nKCfinJMgV29ya2Zsb3cgb3JjaGVzdHJhdGlvbiBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24od29ya2Zsb3dSZXN1bHQsIHsgc3RhdHVzOiAyMDAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1dvcmtmbG93IG9yY2hlc3RyYXRpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnV29ya2Zsb3cgb3JjaGVzdHJhdGlvbiBmYWlsZWQnLFxuICAgICAgICBkb2N1bWVudElkOiAndW5rbm93bicsXG4gICAgICAgIGZpbGVOYW1lOiAndW5rbm93bicsXG4gICAgICAgIHByb2Nlc3NpbmdTdGVwczogW11cbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBwYXJzZSBhZ2VudCByZXNwb25zZSBpbnRvIHN0cnVjdHVyZWQgZGF0YVxuZnVuY3Rpb24gcGFyc2VBZ2VudFJlc3BvbnNlKHJlc3BvbnNlVGV4dDogc3RyaW5nLCBkb2N1bWVudElkOiBzdHJpbmcsIGZpbGVOYW1lOiBzdHJpbmcpIHtcbiAgLy8gVHJ5IHRvIHBhcnNlIGFzIEpTT04gZmlyc3QgKGZvciBzdHJ1Y3R1cmVkIHJlc3BvbnNlcylcbiAgbGV0IHBhcnNlZFJlc3BvbnNlO1xuICB0cnkge1xuICAgIC8vIExvb2sgZm9yIEpTT04gaW4gdGhlIHJlc3BvbnNlXG4gICAgY29uc3QganNvbk1hdGNoID0gcmVzcG9uc2VUZXh0Lm1hdGNoKC9cXHtbXFxzXFxTXSpcXH0vKTtcbiAgICBpZiAoanNvbk1hdGNoKSB7XG4gICAgICBwYXJzZWRSZXNwb25zZSA9IEpTT04ucGFyc2UoanNvbk1hdGNoWzBdKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coJ05vIEpTT04gZm91bmQgaW4gcmVzcG9uc2UsIHVzaW5nIHRleHQgcGFyc2luZycpO1xuICB9XG5cbiAgLy8gSWYgd2UgaGF2ZSBhIHN0cnVjdHVyZWQgcmVzcG9uc2UsIHVzZSBpdFxuICBpZiAocGFyc2VkUmVzcG9uc2UgJiYgcGFyc2VkUmVzcG9uc2Uuc3R1ZGVudF9pbmZvKSB7XG4gICAgcmV0dXJuIHBhcnNlU3RydWN0dXJlZFJlc3BvbnNlKHBhcnNlZFJlc3BvbnNlLCBkb2N1bWVudElkLCBmaWxlTmFtZSk7XG4gIH1cblxuICAvLyBGYWxsYmFjayB0byB0ZXh0IHBhcnNpbmcgZm9yIHVuc3RydWN0dXJlZCByZXNwb25zZXNcbiAgY29uc3Qgc3R1ZGVudE5hbWUgPSBleHRyYWN0VmFsdWUocmVzcG9uc2VUZXh0LCAvc3R1ZGVudFs6XFxzXSsoW14sXFxuXSspL2kpIHx8ICdTdHVkZW50IE5hbWUnO1xuICBjb25zdCBncmFkZUxldmVsID0gZXh0cmFjdFZhbHVlKHJlc3BvbnNlVGV4dCwgL2dyYWRlWzpcXHNdKyhbXixcXG5dKykvaSkgfHwgJ0dyYWRlIExldmVsJztcbiAgY29uc3Qgc2Nob29sTmFtZSA9IGV4dHJhY3RWYWx1ZShyZXNwb25zZVRleHQsIC9zY2hvb2xbOlxcc10rKFteLFxcbl0rKS9pKSB8fCAnU2Nob29sIE5hbWUnO1xuICBcbiAgLy8gRXh0cmFjdCBzY29yZXNcbiAgY29uc3Qgb3ZlcmFsbFNjb3JlID0gZXh0cmFjdE51bWJlcihyZXNwb25zZVRleHQsIC9vdmVyYWxsWzpcXHNdKnNjb3JlWzpcXHNdKihcXGQrKS9pKSB8fCA3NTtcbiAgY29uc3QgY29tcGxpYW5jZUxldmVsID0gZXh0cmFjdFZhbHVlKHJlc3BvbnNlVGV4dCwgL2NvbXBsaWFuY2VbOlxcc10rKFteLFxcbl0rKS9pKSB8fCAnUGFydGlhbGx5IENvbXBsaWFudCc7XG4gIFxuICAvLyBDcmVhdGUgc3RydWN0dXJlZCBkYXRhXG4gIGNvbnN0IGV4dHJhY3RlZERhdGE6IElFUEV4dHJhY3RlZERhdGEgPSB7XG4gICAgc3R1ZGVudE5hbWUsXG4gICAgZ3JhZGVMZXZlbCxcbiAgICBzY2hvb2xOYW1lLFxuICAgIGllcERhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxuICAgIG5leHRSZXZpZXdEYXRlOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgMzY1ICogMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxuICAgIHJhd1Jlc3BvbnNlOiByZXNwb25zZVRleHRcbiAgfTtcblxuICBjb25zdCByZWRhY3RlZERhdGE6IElFUFJlZGFjdGVkRGF0YSA9IHtcbiAgICByZWRhY3RlZENvbnRlbnQ6IHJlc3BvbnNlVGV4dCxcbiAgICBxYVJlcG9ydDogJ0RvY3VtZW50IHByb2Nlc3NlZCBhbmQgYW5hbHl6ZWQnLFxuICAgIHBpaVJlbW92ZWQ6IHRydWUsXG4gICAgY29tcGxpYW5jZVN0YXR1czogJ0NvbXBsaWFudCcsXG4gICAgcmF3UmVzcG9uc2U6IHJlc3BvbnNlVGV4dFxuICB9O1xuXG4gIGNvbnN0IHNjb3JpbmdEYXRhOiBJRVBTY29yaW5nRGF0YSA9IHtcbiAgICBvdmVyYWxsU2NvcmUsXG4gICAgY2F0ZWdvcnlTY29yZXM6IHtcbiAgICAgIHByZXNlbnRMZXZlbHM6IGV4dHJhY3ROdW1iZXIocmVzcG9uc2VUZXh0LCAvcHJlc2VudFs6XFxzXSpsZXZlbHNbOlxcc10qKFxcZCspL2kpIHx8IDgwLFxuICAgICAgZ29hbHM6IGV4dHJhY3ROdW1iZXIocmVzcG9uc2VUZXh0LCAvZ29hbHNbOlxcc10qKFxcZCspL2kpIHx8IDc1LFxuICAgICAgc2VydmljZXM6IGV4dHJhY3ROdW1iZXIocmVzcG9uc2VUZXh0LCAvc2VydmljZXNbOlxcc10qKFxcZCspL2kpIHx8IDgwLFxuICAgICAgYWNjb21tb2RhdGlvbnM6IGV4dHJhY3ROdW1iZXIocmVzcG9uc2VUZXh0LCAvYWNjb21tb2RhdGlvbnNbOlxcc10qKFxcZCspL2kpIHx8IDc1LFxuICAgICAgdHJhbnNpdGlvbjogZXh0cmFjdE51bWJlcihyZXNwb25zZVRleHQsIC90cmFuc2l0aW9uWzpcXHNdKihcXGQrKS9pKSB8fCA4MCxcbiAgICAgIHBhcmVudFBhcnRpY2lwYXRpb246IGV4dHJhY3ROdW1iZXIocmVzcG9uc2VUZXh0LCAvcGFyZW50WzpcXHNdKnBhcnRpY2lwYXRpb25bOlxcc10qKFxcZCspL2kpIHx8IDc1LFxuICAgIH0sXG4gICAgZGV0YWlsZWRTY29yZXM6IFtcbiAgICAgIHtcbiAgICAgICAgY2F0ZWdvcnk6ICdQcmVzZW50IExldmVscyBvZiBQZXJmb3JtYW5jZScsXG4gICAgICAgIHNjb3JlOiBleHRyYWN0TnVtYmVyKHJlc3BvbnNlVGV4dCwgL3ByZXNlbnRbOlxcc10qbGV2ZWxzWzpcXHNdKihcXGQrKS9pKSB8fCAxNixcbiAgICAgICAgbWF4U2NvcmU6IDIwLFxuICAgICAgICBmZWVkYmFjazogJ0N1cnJlbnQgcGVyZm9ybWFuY2UgbGV2ZWxzIGRvY3VtZW50ZWQnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjYXRlZ29yeTogJ0FubnVhbCBHb2FscycsXG4gICAgICAgIHNjb3JlOiBleHRyYWN0TnVtYmVyKHJlc3BvbnNlVGV4dCwgL2dvYWxzWzpcXHNdKihcXGQrKS9pKSB8fCAxNSxcbiAgICAgICAgbWF4U2NvcmU6IDIwLFxuICAgICAgICBmZWVkYmFjazogJ0dvYWxzIGFyZSBtZWFzdXJhYmxlIGFuZCBhcHByb3ByaWF0ZSdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGNhdGVnb3J5OiAnU2VydmljZXMgYW5kIFN1cHBvcnRzJyxcbiAgICAgICAgc2NvcmU6IGV4dHJhY3ROdW1iZXIocmVzcG9uc2VUZXh0LCAvc2VydmljZXNbOlxcc10qKFxcZCspL2kpIHx8IDE2LFxuICAgICAgICBtYXhTY29yZTogMjAsXG4gICAgICAgIGZlZWRiYWNrOiAnU2VydmljZXMgYXJlIHdlbGwtZG9jdW1lbnRlZCdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGNhdGVnb3J5OiAnQWNjb21tb2RhdGlvbnMgYW5kIE1vZGlmaWNhdGlvbnMnLFxuICAgICAgICBzY29yZTogZXh0cmFjdE51bWJlcihyZXNwb25zZVRleHQsIC9hY2NvbW1vZGF0aW9uc1s6XFxzXSooXFxkKykvaSkgfHwgMTUsXG4gICAgICAgIG1heFNjb3JlOiAyMCxcbiAgICAgICAgZmVlZGJhY2s6ICdBY2NvbW1vZGF0aW9ucyBhcmUgYXBwcm9wcmlhdGUnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjYXRlZ29yeTogJ1RyYW5zaXRpb24gUGxhbm5pbmcnLFxuICAgICAgICBzY29yZTogZXh0cmFjdE51bWJlcihyZXNwb25zZVRleHQsIC90cmFuc2l0aW9uWzpcXHNdKihcXGQrKS9pKSB8fCAxNixcbiAgICAgICAgbWF4U2NvcmU6IDIwLFxuICAgICAgICBmZWVkYmFjazogJ1RyYW5zaXRpb24gcGxhbm5pbmcgaXMgcHJlc2VudCdcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGNhdGVnb3J5OiAnUGFyZW50IFBhcnRpY2lwYXRpb24nLFxuICAgICAgICBzY29yZTogZXh0cmFjdE51bWJlcihyZXNwb25zZVRleHQsIC9wYXJlbnRbOlxcc10qcGFydGljaXBhdGlvbls6XFxzXSooXFxkKykvaSkgfHwgMTUsXG4gICAgICAgIG1heFNjb3JlOiAyMCxcbiAgICAgICAgZmVlZGJhY2s6ICdQYXJlbnQgcGFydGljaXBhdGlvbiBkb2N1bWVudGVkJ1xuICAgICAgfVxuICAgIF0sXG4gICAgY29tcGxpYW5jZUxldmVsLFxuICAgIHJhd1Jlc3BvbnNlOiByZXNwb25zZVRleHRcbiAgfTtcblxuICBjb25zdCBmZWVkYmFja0RhdGE6IElFUEZlZWRiYWNrRGF0YSA9IHtcbiAgICByZWNvbW1lbmRhdGlvbjogb3ZlcmFsbFNjb3JlID49IDgwID8gJ0FwcHJvdmUnIDogb3ZlcmFsbFNjb3JlID49IDYwID8gJ1JldmlzZScgOiAnUmVqZWN0JyxcbiAgICBjb25maWRlbmNlOiBNYXRoLm1pbihvdmVyYWxsU2NvcmUgLyAxMDAsIDEpLFxuICAgIGZlZWRiYWNrU3VtbWFyeTogcmVzcG9uc2VUZXh0LnN1YnN0cmluZygwLCA1MDApICsgJy4uLicsXG4gICAgZGV0YWlsZWRGZWVkYmFjazogW1xuICAgICAge1xuICAgICAgICBzZWN0aW9uOiAnT3ZlcmFsbCBBbmFseXNpcycsXG4gICAgICAgIGlzc3VlOiAnRG9jdW1lbnQgcmVxdWlyZXMgcmV2aWV3JyxcbiAgICAgICAgcmVjb21tZW5kYXRpb246ICdQbGVhc2UgcmV2aWV3IHRoZSBkZXRhaWxlZCBhbmFseXNpcyBwcm92aWRlZCcsXG4gICAgICAgIHByaW9yaXR5OiAnSGlnaCdcbiAgICAgIH1cbiAgICBdLFxuICAgIG5leHRTdGVwczogW1xuICAgICAgJ1JldmlldyB0aGUgZGV0YWlsZWQgYW5hbHlzaXMnLFxuICAgICAgJ0FkZHJlc3MgYW55IGlkZW50aWZpZWQgaXNzdWVzJyxcbiAgICAgICdSZXN1Ym1pdCBpZiBuZWNlc3NhcnknXG4gICAgXSxcbiAgICBlc3RpbWF0ZWRSZXZpc2lvblRpbWU6ICcxLTIgaG91cnMnLFxuICAgIHJhd1Jlc3BvbnNlOiByZXNwb25zZVRleHRcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGV4dHJhY3RlZERhdGEsXG4gICAgcmVkYWN0ZWREYXRhLFxuICAgIHNjb3JpbmdEYXRhLFxuICAgIGZlZWRiYWNrRGF0YVxuICB9O1xufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZXh0cmFjdCB0ZXh0IHZhbHVlc1xuZnVuY3Rpb24gZXh0cmFjdFZhbHVlKHRleHQ6IHN0cmluZywgcmVnZXg6IFJlZ0V4cCk6IHN0cmluZyB8IG51bGwge1xuICBjb25zdCBtYXRjaCA9IHRleHQubWF0Y2gocmVnZXgpO1xuICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXS50cmltKCkgOiBudWxsO1xufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZXh0cmFjdCBudW1iZXJzXG5mdW5jdGlvbiBleHRyYWN0TnVtYmVyKHRleHQ6IHN0cmluZywgcmVnZXg6IFJlZ0V4cCk6IG51bWJlciB8IG51bGwge1xuICBjb25zdCBtYXRjaCA9IHRleHQubWF0Y2gocmVnZXgpO1xuICByZXR1cm4gbWF0Y2ggPyBwYXJzZUludChtYXRjaFsxXSkgOiBudWxsO1xufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gcGFyc2Ugc3RydWN0dXJlZCBBUEkgcmVzcG9uc2VcbmZ1bmN0aW9uIHBhcnNlU3RydWN0dXJlZFJlc3BvbnNlKHBhcnNlZFJlc3BvbnNlOiBhbnksIGRvY3VtZW50SWQ6IHN0cmluZywgZmlsZU5hbWU6IHN0cmluZykge1xuICBjb25zdCB7IHN0dWRlbnRfaW5mbywgaW5kaWNhdG9yX2V2YWx1YXRpb25zLCB0b3RhbF9xdWFsaXR5X3Njb3JlLCBvdmVyYWxsX2NvbXBsaWFuY2UsIG5vdGVzIH0gPSBwYXJzZWRSZXNwb25zZTtcbiAgXG4gIC8vIENyZWF0ZSBleHRyYWN0ZWQgZGF0YSBmcm9tIHN0dWRlbnQgaW5mb1xuICBjb25zdCBleHRyYWN0ZWREYXRhOiBJRVBFeHRyYWN0ZWREYXRhID0ge1xuICAgIHN0dWRlbnROYW1lOiBzdHVkZW50X2luZm8ubmFtZSB8fCAnU3R1ZGVudCBOYW1lJyxcbiAgICBncmFkZUxldmVsOiBgR3JhZGUgJHtzdHVkZW50X2luZm8uYWdlID8gTWF0aC5jZWlsKHN0dWRlbnRfaW5mby5hZ2UgLyA2KSA6ICdVbmtub3duJ31gLFxuICAgIHNjaG9vbE5hbWU6IHN0dWRlbnRfaW5mby5zY2hvb2xfZGlzdHJpY3QgfHwgJ1NjaG9vbCBEaXN0cmljdCcsXG4gICAgaWVwRGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXG4gICAgbmV4dFJldmlld0RhdGU6IHN0dWRlbnRfaW5mby5yZXZpZXdfZGF0ZSB8fCBuZXcgRGF0ZShEYXRlLm5vdygpICsgMzY1ICogMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxuICAgIHJhd1Jlc3BvbnNlOiBKU09OLnN0cmluZ2lmeShwYXJzZWRSZXNwb25zZSlcbiAgfTtcblxuICAvLyBDcmVhdGUgcmVkYWN0ZWQgZGF0YVxuICBjb25zdCByZWRhY3RlZERhdGE6IElFUFJlZGFjdGVkRGF0YSA9IHtcbiAgICByZWRhY3RlZENvbnRlbnQ6IGBEb2N1bWVudCBwcm9jZXNzZWQgYW5kIGFuYWx5emVkLiBTdHVkZW50IGluZm9ybWF0aW9uIHJlZGFjdGVkIGZvciBwcml2YWN5LmAsXG4gICAgcWFSZXBvcnQ6ICdEb2N1bWVudCBwcm9jZXNzZWQgYW5kIGFuYWx5emVkIHdpdGggUElJIHJlZGFjdGlvbicsXG4gICAgcGlpUmVtb3ZlZDogdHJ1ZSxcbiAgICBjb21wbGlhbmNlU3RhdHVzOiAnQ29tcGxpYW50JyxcbiAgICByYXdSZXNwb25zZTogSlNPTi5zdHJpbmdpZnkocGFyc2VkUmVzcG9uc2UpXG4gIH07XG5cbiAgLy8gR3JvdXAgaW5kaWNhdG9yIGV2YWx1YXRpb25zIGJ5IGNhdGVnb3J5XG4gIGNvbnN0IGNhdGVnb3J5R3JvdXBzID0gZ3JvdXBJbmRpY2F0b3JzQnlDYXRlZ29yeShpbmRpY2F0b3JfZXZhbHVhdGlvbnMpO1xuICBcbiAgLy8gQ3JlYXRlIHJ1YnJpYyBzY29yZXMgZnJvbSBpbmRpY2F0b3IgZXZhbHVhdGlvbnNcbiAgY29uc3QgcnVicmljU2NvcmVzOiBSdWJyaWNTY29yZVtdID0gT2JqZWN0LmVudHJpZXMoY2F0ZWdvcnlHcm91cHMpLm1hcCgoW2NhdGVnb3J5LCBpbmRpY2F0b3JzXSkgPT4ge1xuICAgIGNvbnN0IHRvdGFsU2NvcmUgPSBpbmRpY2F0b3JzLnJlZHVjZSgoc3VtLCBpbmRpY2F0b3IpID0+IHN1bSArIGluZGljYXRvci5xdWFsaXR5X3JhdGluZywgMCk7XG4gICAgY29uc3QgbWF4U2NvcmUgPSBpbmRpY2F0b3JzLmxlbmd0aCAqIDM7IC8vIE1heCBxdWFsaXR5IHJhdGluZyBpcyAzXG4gICAgY29uc3QgaXNDb21wbGlhbnQgPSBpbmRpY2F0b3JzLmV2ZXJ5KGluZGljYXRvciA9PiBpbmRpY2F0b3IuY29tcGxpYW5jZV9yYXRpbmcgPT09ICdZJyk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBjYXRlZ29yeS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgJ18nKSxcbiAgICAgIGNhdGVnb3J5LFxuICAgICAgdG90YWxTY29yZSxcbiAgICAgIG1heFNjb3JlLFxuICAgICAgaXNDb21wbGlhbnQsXG4gICAgICBzdW1tYXJ5OiBgJHtpbmRpY2F0b3JzLmZpbHRlcihpID0+IGkuY29tcGxpYW5jZV9yYXRpbmcgPT09ICdZJykubGVuZ3RofS8ke2luZGljYXRvcnMubGVuZ3RofSBpbmRpY2F0b3JzIGNvbXBsaWFudGAsXG4gICAgICBkZXRhaWxlZFN1bW1hcnk6IGBUaGlzIGNhdGVnb3J5IGluY2x1ZGVzICR7aW5kaWNhdG9ycy5sZW5ndGh9IGluZGljYXRvcnMgd2l0aCBhbiBhdmVyYWdlIHF1YWxpdHkgcmF0aW5nIG9mICR7KHRvdGFsU2NvcmUgLyBpbmRpY2F0b3JzLmxlbmd0aCkudG9GaXhlZCgxKX0vMy5gLFxuICAgICAgc3ViQ3JpdGVyaWE6IGluZGljYXRvcnMubWFwKGluZGljYXRvciA9PiAoe1xuICAgICAgICBpZDogaW5kaWNhdG9yLmluZGljYXRvcixcbiAgICAgICAgbmFtZTogaW5kaWNhdG9yLmRlc2NyaXB0aW9uLFxuICAgICAgICBzY29yZTogaW5kaWNhdG9yLnF1YWxpdHlfcmF0aW5nLFxuICAgICAgICBtYXhTY29yZTogMyxcbiAgICAgICAgaXNDb21wbGlhbnQ6IGluZGljYXRvci5jb21wbGlhbmNlX3JhdGluZyA9PT0gJ1knLFxuICAgICAgICBzdW1tYXJ5OiBpbmRpY2F0b3IuY29tcGxpYW5jZV9yYXRpbmcgPT09ICdZJyA/ICdDb21wbGlhbnQnIDogJ05vbi1jb21wbGlhbnQnLFxuICAgICAgICBkZXRhaWxlZFN1bW1hcnk6IGluZGljYXRvci5qdXN0aWZpY2F0aW9uXG4gICAgICB9KSlcbiAgICB9O1xuICB9KTtcblxuICAvLyBDcmVhdGUgc2NvcmluZyBkYXRhXG4gIGNvbnN0IHNjb3JpbmdEYXRhOiBJRVBTY29yaW5nRGF0YSA9IHtcbiAgICBvdmVyYWxsU2NvcmU6IHRvdGFsX3F1YWxpdHlfc2NvcmUsXG4gICAgY2F0ZWdvcnlTY29yZXM6IHtcbiAgICAgIHByZXNlbnRMZXZlbHM6IDgwLFxuICAgICAgZ29hbHM6IDc1LFxuICAgICAgc2VydmljZXM6IDgwLFxuICAgICAgYWNjb21tb2RhdGlvbnM6IDc1LFxuICAgICAgdHJhbnNpdGlvbjogODAsXG4gICAgICBwYXJlbnRQYXJ0aWNpcGF0aW9uOiA3NSxcbiAgICB9LFxuICAgIGRldGFpbGVkU2NvcmVzOiBydWJyaWNTY29yZXMubWFwKHNjb3JlID0+ICh7XG4gICAgICBjYXRlZ29yeTogc2NvcmUuY2F0ZWdvcnksXG4gICAgICBzY29yZTogc2NvcmUudG90YWxTY29yZSxcbiAgICAgIG1heFNjb3JlOiBzY29yZS5tYXhTY29yZSxcbiAgICAgIGZlZWRiYWNrOiBzY29yZS5kZXRhaWxlZFN1bW1hcnlcbiAgICB9KSksXG4gICAgY29tcGxpYW5jZUxldmVsOiBvdmVyYWxsX2NvbXBsaWFuY2UsXG4gICAgcmF3UmVzcG9uc2U6IEpTT04uc3RyaW5naWZ5KHBhcnNlZFJlc3BvbnNlKVxuICB9O1xuXG4gIC8vIENyZWF0ZSBmZWVkYmFjayBkYXRhXG4gIGNvbnN0IGZlZWRiYWNrRGF0YTogSUVQRmVlZGJhY2tEYXRhID0ge1xuICAgIHJlY29tbWVuZGF0aW9uOiBvdmVyYWxsX2NvbXBsaWFuY2UgPT09ICdDb21wbGlhbnQnID8gJ0FwcHJvdmUnIDogJ1JldmlzZScsXG4gICAgY29uZmlkZW5jZTogTWF0aC5taW4odG90YWxfcXVhbGl0eV9zY29yZSAvIDMyLCAxKSwgLy8gQXNzdW1pbmcgbWF4IHNjb3JlIGlzIDMyXG4gICAgZmVlZGJhY2tTdW1tYXJ5OiBub3RlcyB8fCAnRG9jdW1lbnQgYW5hbHlzaXMgY29tcGxldGVkIHdpdGggZGV0YWlsZWQgaW5kaWNhdG9yIGV2YWx1YXRpb25zLicsXG4gICAgZGV0YWlsZWRGZWVkYmFjazogW1xuICAgICAge1xuICAgICAgICBzZWN0aW9uOiAnT3ZlcmFsbCBBbmFseXNpcycsXG4gICAgICAgIGlzc3VlOiBvdmVyYWxsX2NvbXBsaWFuY2UgPT09ICdOb24tQ29tcGxpYW50JyA/ICdDb21wbGlhbmNlIGlzc3VlcyBpZGVudGlmaWVkJyA6ICdEb2N1bWVudCBtZWV0cyBjb21wbGlhbmNlIHJlcXVpcmVtZW50cycsXG4gICAgICAgIHJlY29tbWVuZGF0aW9uOiBub3RlcyB8fCAnUGxlYXNlIHJldmlldyB0aGUgZGV0YWlsZWQgYW5hbHlzaXMgcHJvdmlkZWQnLFxuICAgICAgICBwcmlvcml0eTogb3ZlcmFsbF9jb21wbGlhbmNlID09PSAnTm9uLUNvbXBsaWFudCcgPyAnSGlnaCcgOiAnTWVkaXVtJ1xuICAgICAgfVxuICAgIF0sXG4gICAgbmV4dFN0ZXBzOiBbXG4gICAgICAnUmV2aWV3IHRoZSBkZXRhaWxlZCBpbmRpY2F0b3IgZXZhbHVhdGlvbnMnLFxuICAgICAgJ0FkZHJlc3MgYW55IG5vbi1jb21wbGlhbnQgaW5kaWNhdG9ycycsXG4gICAgICAnUmVzdWJtaXQgaWYgbmVjZXNzYXJ5J1xuICAgIF0sXG4gICAgZXN0aW1hdGVkUmV2aXNpb25UaW1lOiBvdmVyYWxsX2NvbXBsaWFuY2UgPT09ICdOb24tQ29tcGxpYW50JyA/ICcyLTMgaG91cnMnIDogJzEgaG91cicsXG4gICAgcmF3UmVzcG9uc2U6IEpTT04uc3RyaW5naWZ5KHBhcnNlZFJlc3BvbnNlKSxcbiAgICBvdmVyYWxsQ29tcGxpYW5jZTogb3ZlcmFsbF9jb21wbGlhbmNlLFxuICAgIHJ1YnJpY1Njb3Jlc1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZXh0cmFjdGVkRGF0YSxcbiAgICByZWRhY3RlZERhdGEsXG4gICAgc2NvcmluZ0RhdGEsXG4gICAgZmVlZGJhY2tEYXRhXG4gIH07XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBncm91cCBpbmRpY2F0b3JzIGJ5IGNhdGVnb3J5XG5mdW5jdGlvbiBncm91cEluZGljYXRvcnNCeUNhdGVnb3J5KGluZGljYXRvcnM6IGFueVtdKSB7XG4gIGNvbnN0IGdyb3VwczogeyBba2V5OiBzdHJpbmddOiBhbnlbXSB9ID0ge307XG4gIFxuICBpbmRpY2F0b3JzLmZvckVhY2goaW5kaWNhdG9yID0+IHtcbiAgICBjb25zdCBjYXRlZ29yeSA9IGdldENhdGVnb3J5RnJvbUluZGljYXRvcihpbmRpY2F0b3IuaW5kaWNhdG9yKTtcbiAgICBpZiAoIWdyb3Vwc1tjYXRlZ29yeV0pIHtcbiAgICAgIGdyb3Vwc1tjYXRlZ29yeV0gPSBbXTtcbiAgICB9XG4gICAgZ3JvdXBzW2NhdGVnb3J5XS5wdXNoKGluZGljYXRvcik7XG4gIH0pO1xuICBcbiAgcmV0dXJuIGdyb3Vwcztcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIG1hcCBpbmRpY2F0b3IgbnVtYmVycyB0byBjYXRlZ29yaWVzXG5mdW5jdGlvbiBnZXRDYXRlZ29yeUZyb21JbmRpY2F0b3IoaW5kaWNhdG9yOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBudW0gPSBwYXJzZUludChpbmRpY2F0b3Iuc3BsaXQoJy4nKVswXSk7XG4gIGNvbnN0IGNhdGVnb3JpZXMgPSBbXG4gICAgJ1N0dWRlbnQgUGFydGljaXBhdGlvbicsXG4gICAgJ0Fzc2Vzc21lbnQnLFxuICAgICdQb3N0c2Vjb25kYXJ5IEdvYWxzJyxcbiAgICAnQW5udWFsIEdvYWxzJyxcbiAgICAnVHJhbnNpdGlvbiBTZXJ2aWNlcycsXG4gICAgJ0NvdXJzZSBvZiBTdHVkeScsXG4gICAgJ0FnZW5jeSBQYXJ0aWNpcGF0aW9uJyxcbiAgICAnSW50ZXJuYWwgQ29uc2lzdGVuY3knXG4gIF07XG4gIHJldHVybiBjYXRlZ29yaWVzW251bSAtIDFdIHx8ICdPdGhlcic7XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiQUdFTlRfQ09ORklHIiwiYXBpS2V5IiwiYmFzZVVSTCIsImFnZW50SWQiLCJ1c2VySWQiLCJzZXNzaW9uSWQiLCJQT1NUIiwicmVxdWVzdCIsImRvY3VtZW50SWQiLCJmaWxlTmFtZSIsImpzb24iLCJzdWNjZXNzIiwiZXJyb3IiLCJzdGF0dXMiLCJjb25zb2xlIiwibG9nIiwid29ya2Zsb3dSZXN1bHQiLCJwcm9jZXNzaW5nU3RlcHMiLCJzdGVwIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibWVzc2FnZSIsImNvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJ0aW1lb3V0SWQiLCJzZXRUaW1lb3V0IiwiYWJvcnQiLCJhZ2VudFJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1c2VyX2lkIiwiYWdlbnRfaWQiLCJzZXNzaW9uX2lkIiwic2lnbmFsIiwiY2xlYXJUaW1lb3V0Iiwib2siLCJFcnJvciIsInN0YXR1c1RleHQiLCJhZ2VudERhdGEiLCJyZXNwb25zZVRleHQiLCJyZXNwb25zZSIsInN0cnVjdHVyZWREYXRhIiwicGFyc2VBZ2VudFJlc3BvbnNlIiwiZXh0cmFjdGVkRGF0YSIsInJlZGFjdGVkRGF0YSIsInNjb3JpbmdEYXRhIiwiZmVlZGJhY2tEYXRhIiwiZHVyYXRpb24iLCJub3ciLCJnZXRUaW1lIiwibmFtZSIsInN0dWRlbnROYW1lIiwiZ3JhZGVMZXZlbCIsInNjaG9vbE5hbWUiLCJpZXBEYXRlIiwic3BsaXQiLCJuZXh0UmV2aWV3RGF0ZSIsInJhd1Jlc3BvbnNlIiwicGFyc2VkUmVzcG9uc2UiLCJqc29uTWF0Y2giLCJtYXRjaCIsInBhcnNlIiwic3R1ZGVudF9pbmZvIiwicGFyc2VTdHJ1Y3R1cmVkUmVzcG9uc2UiLCJleHRyYWN0VmFsdWUiLCJvdmVyYWxsU2NvcmUiLCJleHRyYWN0TnVtYmVyIiwiY29tcGxpYW5jZUxldmVsIiwicmVkYWN0ZWRDb250ZW50IiwicWFSZXBvcnQiLCJwaWlSZW1vdmVkIiwiY29tcGxpYW5jZVN0YXR1cyIsImNhdGVnb3J5U2NvcmVzIiwicHJlc2VudExldmVscyIsImdvYWxzIiwic2VydmljZXMiLCJhY2NvbW1vZGF0aW9ucyIsInRyYW5zaXRpb24iLCJwYXJlbnRQYXJ0aWNpcGF0aW9uIiwiZGV0YWlsZWRTY29yZXMiLCJjYXRlZ29yeSIsInNjb3JlIiwibWF4U2NvcmUiLCJmZWVkYmFjayIsInJlY29tbWVuZGF0aW9uIiwiY29uZmlkZW5jZSIsIk1hdGgiLCJtaW4iLCJmZWVkYmFja1N1bW1hcnkiLCJzdWJzdHJpbmciLCJkZXRhaWxlZEZlZWRiYWNrIiwic2VjdGlvbiIsImlzc3VlIiwicHJpb3JpdHkiLCJuZXh0U3RlcHMiLCJlc3RpbWF0ZWRSZXZpc2lvblRpbWUiLCJ0ZXh0IiwicmVnZXgiLCJ0cmltIiwicGFyc2VJbnQiLCJpbmRpY2F0b3JfZXZhbHVhdGlvbnMiLCJ0b3RhbF9xdWFsaXR5X3Njb3JlIiwib3ZlcmFsbF9jb21wbGlhbmNlIiwibm90ZXMiLCJhZ2UiLCJjZWlsIiwic2Nob29sX2Rpc3RyaWN0IiwicmV2aWV3X2RhdGUiLCJjYXRlZ29yeUdyb3VwcyIsImdyb3VwSW5kaWNhdG9yc0J5Q2F0ZWdvcnkiLCJydWJyaWNTY29yZXMiLCJPYmplY3QiLCJlbnRyaWVzIiwibWFwIiwiaW5kaWNhdG9ycyIsInRvdGFsU2NvcmUiLCJyZWR1Y2UiLCJzdW0iLCJpbmRpY2F0b3IiLCJxdWFsaXR5X3JhdGluZyIsImxlbmd0aCIsImlzQ29tcGxpYW50IiwiZXZlcnkiLCJjb21wbGlhbmNlX3JhdGluZyIsImlkIiwidG9Mb3dlckNhc2UiLCJyZXBsYWNlIiwic3VtbWFyeSIsImZpbHRlciIsImkiLCJkZXRhaWxlZFN1bW1hcnkiLCJ0b0ZpeGVkIiwic3ViQ3JpdGVyaWEiLCJkZXNjcmlwdGlvbiIsImp1c3RpZmljYXRpb24iLCJvdmVyYWxsQ29tcGxpYW5jZSIsImdyb3VwcyIsImZvckVhY2giLCJnZXRDYXRlZ29yeUZyb21JbmRpY2F0b3IiLCJwdXNoIiwibnVtIiwiY2F0ZWdvcmllcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/workflow-orchestrator/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fworkflow-orchestrator%2Froute&page=%2Fapi%2Fworkflow-orchestrator%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fworkflow-orchestrator%2Froute.ts&appDir=%2FUsers%2Fericheilman%2Funiversity-startups%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fericheilman%2Funiversity-startups&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();